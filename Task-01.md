# Задание 1: Микрофронтенды

## Уровень 1

**Общий анализ и выбор фреймворка**
В данном случае, у нас приложение: 
- Относительно не большое  
- Написано только на React
- Может имеет ряд общих зависимостей

исходя из этого можно для реализаиции выбрать WMF - с моей точки зрения он более порост на старте, в курсе он рассмотрен подробнее.

Для более комплексных приложений можно рассмотреть SSPA - он позволяет использовать разные технологические стеки для разных микрофронтентов, что позволит максимально изолироватьстек под нужды конкретных команд/бизнеса/пользовательского опыта. Но с большой долей вероятности, такая возможности будут стоить более высоким порогом входа и определенными сложностями эксплуатации подобного приложения.

**Бизнес функции**
В данном случае, я готов выделил несколько функций: 
- Галерея - фотографии, лайки 
- Профиль - управление профилем, логин, регистрация.
- Базовое приложение (оно же host в терминологии MF) - является каркасом, к нему относится общий функционал отвечающий за работу приложения, основные компоненты, подключение remote app. В будущем на уровне этого приложения можно добавить фичатоглы для подключения нужных версий remote приложений. 


Это позволит командам Галереи и Профиля состредоточится на определенном пользователском опыте и соответствующих бизнес возможностях и развивать их в определенном домене.
А коменде базового приложения, держать в фокусе общий функционал и интеграцию различных версий модулей.


**Стратегия проектирования** - Выбрал - `Вертикальная нарезка`. Каждый микрофронтенд имеет собственные: стили для компонентов, формы, бизнес логику. 

Использовать более строгие подходы в виде `Автономность команд` или `Изоляцию` считаю в данном случае избыточной, на мой взгляд они ближе идеям заложеным в SSPA фреймворке, в контексте суверенитета микрофронтендов.


**Управление состоянием** 

В предложеной концепции нужно будет передовать часть состояния из profile и gallery в host для монтирования страницы, которые в настоящий момент работают через хук useState, нужен механизм который позволит это реализовать. После оценки рынка (в том числе и на hh) стало понятно, что популярен стек React/Redux, тем более он позволяет использовать Global Store для монтирования в каждом микрофронтенде. 
В курсе такой вариант так же рассмотрен - по этому, подходит.

 Состояния которые будем хранить в Global Store:
 - isEditProfilePopupOpen
 - isAddPlacePopupOpen
 - isEditAvatarPopupOpen
 - selectedCard
 - cards 
 - currentUser
 - isInfoToolTipOpen
 - tooltipStatus
 - isLoggedIn
 - email
 - history


## Уровень 2 

Попытка собрать в `architecture-sprint-1/frontend/microfrontend/` - пока стабильно терпит фиаско. 

Общая структура описана ниже:

### host

К нему относятся общие компоненты и стили относящиеся к рендеренгу основной страницы: Header, Main, ProtectionRoute, Footer

``` 
├──src
│   ├── blocks
│   │   ├── content
│   │   ├── footer
│   │   ├── header
│   │   └── page                    
│   ├── components
│   │   ├── Footer.js
│   │   ├── Header.js
│   │   ├── Main.js
│   │   └── ProtectedRoute.js
│   └── images
```

### gallery

К нему относятся компоненты и стили отвечающие за представлении галереи фотографий и лайков: 
- Добавление нового места / фотографии
- Просмотр фотографии в масштабе 
- Компоненты: AddPlacePopup, Card, ImagePopup, PopupWithForm

```
├──src
│   ├── blocks
│   │   ├── card
│   │   ├── places
│   │   └── popup
│   ├── components
│   │   ├── AddPlacePopup.js
│   │   ├── Card.js
│   │   ├── ImagePopup.js
│   │   └── PopupWithForm.js
│   ├── images
│   └── utils
│       ├── api.js
│       └── auth.js
```


### profile

К Профилю относятся компоненты и стили отвечающие профиль пользователя, логин и регистрацию
Компоненты: EditAvatarPopup, EditProfilePopup, InfoTooltip, Login, Register

```
├──src
│   ├── blocks
│   │   ├── auth-form
│   │   ├── login
│   │   └── profile
│   ├── components
│   │   ├── EditAvatarPopup.js
│   │   ├── EditProfilePopup.js
│   │   ├── InfoTooltip.js
│   │   ├── Login.js
│   │   └── Register.js
│   ├── contexts
│   │   └── CurrentUserContext.js
│   ├── images
│   └── utils
│       ├── api.js
│       └── auth.js
```

